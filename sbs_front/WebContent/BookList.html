<!DOCTYPE html>
<html>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  <script src="https://kit.fontawesome.com/b99e675b6e.js"></script>
<head>
<meta charset="UTF-8">
<title>BookList</title>
<link rel="stylesheet" href="csskim/BookList.css">
</head>

<body>
<!-- 4*4로 그리드 나누고 div를 넣고 클래스를 똑같이, 이미지, 도서제목(a태그를 넣어서 링크는 정훈님 디테일로), 작가, 가격  

보내는페이지 넣을때는 이렇게  
base.html
location.href(
?content=bbsdetail
?bbsdetail    
-->

<div class="container">
 <h2>BookList</h2>
    <div class="row" id="row">
    <div class="col-xs-12"></div>
    
    <div class="col-xs-12">
     <div class="wrapper">
       <div class="search_box">
         <div class="dropdown">
            <div class="default_option">전체 검색</div>  
            <ul>
              <li>전체 검색</li>
              <li>도서제목 검색</li>
              <li>도서작가 검색</li>
            </ul>
          </div>
        <div class="search_field">
          <input type="text" class="input" placeholder="Search">
          <i class="fas fa-search"></i>
         </div>
       </div>
      </div>            
    </div>
  </div>
</div>

  
<script type="text/javascript"> //09280911영상부터 다시 보기
$(document).ready(function(){
	// 입력된 책 정보 받아오기	
		$.ajax({
			url:"http://localhost:3000/booklist",
			type:"get",
			success:function(resp){
			//	alert('success');
				alert(JSON.stringify(resp));
				
                $.each(resp, function (index, item) {
					
					let data = "<div class='col-md-3'>";
					data += "<img src='" + item.filename + "'>";
					data += "<a href=''>" + item.title + "<a>";
					data += "<p>지은이:" + item.writer + "</p>";
					data += "<p>" + item.price + "원</p>";
					data += "</div>";
					
					$("#row").append(data);	
				
				});
			},
			error:function(){
				alert('error');
			}			
		});
    });

</script>

<script type="text/javascript"> 
$(".default_option").click(function(){
	  $(".dropdown ul").addClass("active");
	});

	$(".dropdown ul li").click(function(){
	  var text = $(this).text();
	  $(".default_option").text(text);
	  $(".dropdown ul").removeClass("active");
	  
   });

</script>
</body>
</html>

<!--
 <검색창 자바 스크립트>
   키를 입력할 때마다 검색 결과가 동적으로 변화하기

- input 태그에 onkeyup을 사용해 키를 누를때마다 filter()라는 함수를 실행시키기 

- 대소문자를 구분하지 않고 가져오기 위해 검색한 값을 toUpperCase()로 모두 대문자로 변환해 변수에 담기

- 목록에 있는 모든 아이템을 getElementsByClassName으로 가져오기

- 목록을 for문으로 돌려 i번째 아이템의 자식 요소인 name의 값을 가져온다.

- 비교를 위해 name의 값도 대문자로 바꿔준 후 .indexOf()로 검색한 값이 있는지 없는지 확인하기. 값이 없을 경우 -1로 반환

- 값이 -1이 아닐경우 item[i].style.display를 flex로 바꿔 시각화 아닐 경우 none로 설정해 검색 목록에 띄우지 않기
 -->
 
<!--  
 <script type="text/javascript">
      function filter(){

        var value, name, item, i;

        value = document.getElementById("value").value.toUpperCase();
        item = document.getElementsByClassName("item");

        for(i=0;i<item.length;i++){
          name = item[i].getElementsByClassName("name");
          if(name[0].innerHTML.toUpperCase().indexOf(value) > -1){
            item[i].style.display = "flex";
          }else{
            item[i].style.display = "none";
          }
        }
      }
</script>
-->

<!-- 

				$("low").html("<div>").each(function()
						 
			   if(this.value == "3") {

			   $(this).after("<option value=\"4");

	             return false;
			   }
	
			     error:function(){
			     alert('error');
				}	
			  }
		   });
       });	
	*/
            // 미리 나눠진 로우에서 칼럼을 짚어넣는 제이쿼리문 만들기 
            // .html하고 low한다음에 div까지 죄다 짚어넣기
            // if에서 인덱스를 4로나누고 나머지가 0일때 로우를 넣는걸 추가하는 방식으로 
            // if문으로 제이쿼리 4페이지를 한줄로 잡는다. -> index /4 는 0일때 로우를 추가
         		
                	/*
                	$.each(resp, function (index, item) {
					
					let data = "<div class='col-md-3'>";
					data += "<h3>" + item.title + "</h3>";
					data += "<p>" + item.writer + "</p>";
					data += "<p>" + item.price + "</p>";
					data += "</div>";
					
					$("#row").append(data);					
				});
			},
			error:function(){
				alert('error');
			}			
		});
    });

 -->
